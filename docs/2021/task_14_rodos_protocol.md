# USB-термометр RODOS-5

Для подачи команды на термометр:
1. ему передается буфер из девяти байт,
2. Ожидаем некоторое время (таймаут)
3. считываем ответный буффер из девяти байт
4. проверяем корректность ответа

Правила заполнения буфера (для основных команд):

* Нулевой байт всегда равен нулю
* Неиспользуемые байты в конце буффера равны нулю
* первый и второй байт задают команду
* Начиная с третьего байта идут пользовательские данные/ выходные данные термометра

Проверка корректности считывания:

* Первые три байта выходного буфера должны быть равны первым трём байтам входного

Описание команд:

|Команда | первый/второй байт | таймаут | Куда записывыаются пользовательские данные |Как парсить ответ |
|--- |--- |--- | --- | --- |
|RESET |`0x180x48`| 10 ms| 
|Записать один **бит**|`0x180x81`| 5 ms |  в третий байт буффера, надо передать байт у которого все биты кроме первого равны нулю| третий байт равен переданному
|Записать один байт |`0x180x88`| 5 ms |надо передать байт в третий байт буффера| третий байт равен переданному
|Записать четыре байта |`0x180x84`| 5 ms | Передаваемые байты надо записать с 3 по 7 позицию буффера| 3-7 байты выходного буффера равны переданным
|Прочитать 2 **бита**| `0x180x82`| 5 ms | В 3-4 позицию буффера надо записать `0x01`| 3-4 байты выходного буффера в первом бите содержат необходимые занчения
|Прочитать один байт| `0x180x88`| 5 ms | В 3 байт надо записать `0xFF` | В 3 позиции выходного буфера будет считанный байт|
|Прочитать четыре байта| `0x180x84`| 30 ms | В 3-7 байты надо записать `0xFF` | В 3-7 позиции выходного буфера будет считанные байты|
|Получить ID устройства| `0x1d0x00`| 5ms |Последние четыре байта, безнаковое целое в big-endian|
